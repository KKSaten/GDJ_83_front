<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="checkbox" name="ch" id="checkAll" onclick="Allcheck()">
    <input type="checkbox" name="ch" class="check">
    <input type="checkbox" name="ch" class="check">
    <input type="checkbox" name="ch" class="check">
    <input type="checkbox" name="ch" class="check">
    <button onclick="info()">Click</button>



    <script>

        const check = document.getElementsByClassName("check");
        const checkAll = document.getElementById("checkAll");
        let check_cnt = 0;
        let cnt = 0;

        function info() {
            for(let i=0; i<check.length; i++) {
                console.log(check[i].checked);
                check[i].checked = checkAll.checked;
            }

        } // 버튼을 누르면 첫번째 칸 체크를 나머지 칸이 전부 따라가기


        // function Allcheck() {
        //     if (checkAll.checked == 1) {
        //         for(let i=0; i<check.length; i++) {
        //             check[i].checked = true;
        //         }
        //     }
        //     else {
        //         for(let i=0; i<check.length; i++) {
        //             check[i].checked = false;
        //         }
        //     }
        // } // 버튼을 누르지 않아도 첫번째 체크를 누르자마자 나머지 칸이 전부 따라가기


        // ㅡ> 최적화하기
        function Allcheck() {
            for(let i=0; i<check.length; i++) {
                check[i].checked = checkAll.checked;
                if(checkAll.checked == 1){
                    check_cnt = check.length;
                }
                else {
                    check_cnt = 0;
                }
                console.log(check_cnt);
            }
        } // 똑같은 코드를 반복해서 사용하지 않는 방법을 찾는 것
        

        // 뒤에 4개의 체크중 하나라도 체크가 풀리면 첫번째 모든체크의 체크가 풀리게, 모두 체크가 되면 모든체크도 체크
        for(let i=0; i<check.length; i++) {
            check[i].addEventListener("click", function() {
                if(check[i].checked == 0){
                    cnt = -1;
                }
                else {
                    cnt = 1;
                }
                check_cnt = check_cnt + cnt;
                if(check_cnt == check.length) {
                    checkAll.checked = 1;
                }
                else {
                    checkAll.checked = 0;
                }

                console.log(check_cnt);
            });
        }



    </script>
</body>
</html>